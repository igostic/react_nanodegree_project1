{"version":3,"sources":["BooksAPI.js","BookshelfChanger.js","Book.js","Bookshelf.js","ListBooks.js","SearchResults.js","SearchBooksInput.js","SearchBooks.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","getAll","fetch","concat","then","res","json","data","books","update","book","shelf","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","search","query","BookshelfChanger","state","value","_this","props","handleChange","event","target","setState","onMove","react_default","a","createElement","className","this","onChange","disabled","Component","Book","_ref","style","width","height","backgroundImage","imageLinks","thumbnail","src_BookshelfChanger","title","authors","join","Bookshelf","booksOnThisShelf","filter","key","name","map","src_Book","ListBooks","_this$props","bookshelves","src_Bookshelf","Link","to","SearchResults","searchBooks","myBooks","updatedBooks","b","SearchBooksInput","val","onSearch","type","placeholder","autoFocus","SearchBooks","onResetSearch","onClick","src_SearchBooksInput","src_SearchResults","BooksApp","error","componentDidMount","BooksAPI","catch","err","console","log","moveBook","prevState","searchForBooks","debounce","length","resetSearch","_this2","_this$state","Route","exact","path","render","src_ListBooks","src_SearchBooks","ReactDOM","BrowserRouter","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.6d32dcf2.chunk.js","sourcesContent":["const api = 'https://reactnd-books-api.udacity.com';\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token;\nif (!token)\n  token = localStorage.token = Math.random()\n    .toString(36)\n    .substr(-8);\n\nconst headers = {\n  Accept: 'application/json',\n  Authorization: token,\n};\n\nexport const get = bookId =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book);\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books);\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ shelf }),\n  }).then(res => res.json());\n\nexport const search = query =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ query }),\n  })\n    .then(res => res.json())\n    .then(data => data.books);\n","import React, { Component } from 'react';\n\nclass BookshelfChanger extends Component {\n  state = {\n    value: this.props.shelf\n  };\n  handleChange = event => {\n    const { value } = event.target;\n    this.setState({ value });\n    this.props.onMove(this.props.book, value);\n  };\n  render() {\n    return (\n      <div className=\"book-shelf-changer\">\n        <select value={this.state.value} onChange={this.handleChange}>\n          <option value=\"move\" disabled>\n            Move to...\n          </option>\n          <option value=\"currentlyReading\">Currently Reading</option>\n          <option value=\"wantToRead\">Want to Read</option>\n          <option value=\"read\">Read</option>\n          <option value=\"none\">None</option>\n        </select>\n      </div>\n    );\n  }\n}\n\nexport default BookshelfChanger;\n","import React from 'react';\nimport BookshelfChanger from './BookshelfChanger';\n\nconst Book = ({ book, shelf, onMove }) => (\n  <li>\n    <div className=\"book\">\n      <div className=\"book-top\">\n        <div\n          className=\"book-cover\"\n          style={{\n            width: 128,\n            height: 193,\n            backgroundImage: `url(${\n              book.imageLinks\n                ? book.imageLinks.thumbnail\n                : 'icons/book-placeholder.svg'\n            })`\n          }}\n        />\n        <BookshelfChanger book={book} shelf={shelf} onMove={onMove} />\n      </div>\n      <div className=\"book-title\">{book.title}</div>\n      <div className=\"book-authors\">\n        {book.authors ? book.authors.join(', ') : 'Unknown Author'}\n      </div>\n    </div>\n  </li>\n);\n\nexport default Book;\n","import React from 'react';\nimport Book from './Book';\n\nconst Bookshelf = props => {\n  const { shelf, books, onMove } = props;\n  const booksOnThisShelf = books.filter(book => book.shelf === shelf.key);\n  // console.log('booksOnThisShelf', booksOnThisShelf);\n  return (\n    <div className=\"bookshelf\">\n      <h2 className=\"bookshelf-title\">{shelf.name}</h2>\n      <div className=\"bookshelf-books\">\n        <ol className=\"books-grid\">\n          {booksOnThisShelf.map(book => (\n            <Book key={book.id} book={book} shelf={shelf.key} onMove={onMove} />\n          ))}\n        </ol>\n      </div>\n    </div>\n  );\n};\n\nexport default Bookshelf;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Bookshelf from './Bookshelf';\n\nclass ListBooks extends Component {\n  render() {\n    const { bookshelves, books, onMove } = this.props;\n    return (\n      <div className=\"list-books\">\n        <div className=\"list-books-title\">\n          <h1>MyReads</h1>\n        </div>\n        <div className=\"list-books-content\">\n          <div>\n            {bookshelves.map(shelf => (\n              <Bookshelf\n                key={shelf.key}\n                shelf={shelf}\n                books={books}\n                onMove={onMove}\n              />\n            ))}\n          </div>\n        </div>\n        <div className=\"open-search\">\n          <Link to=\"search\">\n            <button>Add a Book</button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ListBooks;\n","import React from 'react';\nimport Book from './Book';\n\nconst SearchResults = props => {\n  const { searchBooks, myBooks, onMove } = props;\n\n  const updatedBooks = searchBooks.map(book => {\n    myBooks.map(b => {\n      if (b.id === book.id) {\n        book.shelf = b.shelf;\n      }\n      return b;\n    });\n    return book;\n  });\n  return (\n    <div className=\"search-books-results\">\n      <ol className=\"books-grid\">\n        {updatedBooks.map(book => (\n          <Book\n            key={book.id}\n            book={book}\n            shelf={book.shelf ? book.shelf : 'none'}\n            onMove={onMove}\n          />\n        ))}\n      </ol>\n    </div>\n  );\n};\n\nexport default SearchResults;\n","import React, { Component } from 'react';\n\nclass SearchBooksInput extends Component {\n  state = {\n    value: '',\n  };\n  handleChange = event => {\n    // this.setState({ value: event.target.value });\n    const val = event.target.value;\n    this.setState({ value: val }, () => {\n      // console.log(val);\n      // if (val.length >= 1) {\n      this.props.onSearch(val);\n      // }\n    });\n  };\n  render() {\n    return (\n      <div className=\"search-books-input-wrapper\">\n        <input\n          type=\"text\"\n          value={this.state.value}\n          placeholder=\"Search by title or author\"\n          onChange={this.handleChange}\n          autoFocus\n        />\n      </div>\n    );\n  }\n}\n\nexport default SearchBooksInput;\n","import React, { Component } from 'react';\nimport SearchResults from './SearchResults';\nimport { Link } from 'react-router-dom';\nimport SearchBooksInput from './SearchBooksInput';\n\nclass SearchBooks extends Component {\n  render() {\n    const {\n      searchBooks,\n      myBooks,\n      onSearch,\n      onResetSearch,\n      onMove\n    } = this.props;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link to=\"/\">\n            <button className=\"close-search\" onClick={onResetSearch}>\n              Close\n            </button>\n          </Link>\n          <SearchBooksInput onSearch={onSearch} />\n        </div>\n        <SearchResults\n          searchBooks={searchBooks}\n          myBooks={myBooks}\n          onMove={onMove}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SearchBooks;\n","import React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport { debounce } from 'throttle-debounce';\nimport * as BooksAPI from './BooksAPI';\nimport './App.css';\nimport ListBooks from './ListBooks';\nimport SearchBooks from './SearchBooks';\n\nconst bookshelves = [\n  { key: 'currentlyReading', name: 'Currently Reading' },\n  { key: 'wantToRead', name: 'Want to Read' },\n  { key: 'read', name: 'Read' }\n];\nclass BooksApp extends Component {\n  state = {\n    myBooks: [],\n    searchBooks: [],\n    error: false\n  };\n  componentDidMount = () => {\n    BooksAPI.getAll()\n      .then(books => {\n        this.setState({ myBooks: books });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ error: true });\n      });\n  };\n  moveBook = (book, shelf) => {\n    BooksAPI.update(book, shelf).catch(err => {\n      console.log(err);\n      this.setState({ error: true });\n    });\n    if (shelf === 'none') {\n      this.setState(prevState => ({\n        myBooks: prevState.myBooks.filter(b => b.id !== book.id)\n      }));\n    } else {\n      book.shelf = shelf;\n      this.setState(prevState => ({\n        myBooks: prevState.myBooks.filter(b => b.id !== book.id).concat(book)\n      }));\n    }\n  };\n  searchForBooks = debounce(300, false, query => {\n    if (query.length > 0) {\n      BooksAPI.search(query).then(books => {\n        if (books.error) {\n          this.setState({ searchBooks: [] });\n        } else {\n          this.setState({ searchBooks: books });\n        }\n      });\n    } else {\n      this.setState({ searchBooks: [] });\n    }\n  });\n  resetSearch = () => {\n    this.setState({ searchBooks: [] });\n  };\n\n  render() {\n    const { myBooks, searchBooks, error } = this.state;\n    if (error) {\n      return <div>Network error. Please try again later.</div>;\n    }\n    return (\n      <div className=\"app\">\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <ListBooks\n              bookshelves={bookshelves}\n              books={myBooks}\n              onMove={this.moveBook}\n            />\n          )}\n        />\n        <Route\n          path=\"/search\"\n          render={() => (\n            <SearchBooks\n              searchBooks={searchBooks}\n              myBooks={myBooks}\n              onSearch={this.searchForBooks}\n              onMove={this.moveBook}\n              onResetSearch={this.resetSearch}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BooksApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}